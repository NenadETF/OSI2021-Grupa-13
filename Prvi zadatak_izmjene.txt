#include <stdio.h>
#include <stdlib.h>
#include <string.h>

typedef struct korisnik 
{
    char ime[20];
    char sifra[10];
} KOR; 


void prijava();
void newline(); 
void administrator();


int main() 
{
    prijava();
    return 0; 
}

void prijava() 
{
    FILE* fp; 
    int brojac = 3; 
    int uslov;  
    char uIme[20], uSifra[10], buffer[50];
    do {
        uslov = 0; 
        printf("Korisnicko ime: "); fgets(uIme, 20, stdin); // Unos korisnickog imena
        printf("Sifra: "); fgets(uSifra, 10, stdin); // Unos sifre korisnickog naloga
        
        fp = fopen("korisnickinalozi.dat", "rb"); 
        if(!fp) printf("Greska pri otvaranju datoteke.\n"); 
        else 
        {
            KOR input; 
            while(fread(&input, sizeof(KOR), 1, fp)) 
            {
                if((strncmp(uIme, input.ime, strlen(input.ime))) == 0) ++uslov; 
                else 
                {
                    --brojac; 
                    break; 
                }
                if((strncmp(uSifra, input.sifra, strlen(input.sifra))) == 0) ++uslov;
                else 
                {
                    --brojac; 
                    break; 
                }
            }
            if(uslov == 2) 
            {
                newline();
                newline();
                printf("Pristup omogucen.\n");
                newline();
                newline();
                newline();
                administrator();
            }
        }
        if(brojac == 0)
        {
            printf("Odbijen pristup.\n"); 
            break; 
        }
    } while(uslov != 2);
}

void newline() 
{
    printf("\n");
}

void administrator() 
{
    int unos;
    do {
        printf("=================================================================================\n");
        printf("1: Pravljenje naloga\n");
        printf("2: Pregled naloga\n");
        printf("3: Brisanje naloga\n");
        printf("0: Odjava\n");
        printf("=================================================================================\n");
        printf("Unesite opciju: "); scanf("%d", &unos);
        getchar();
        if(unos == 1) { printf("Pravljenje naloga\n"); }
        else if(unos == 2) { printf("Pregled naloga\n"); }
        else if(unos == 3) { printf("Brisanje naloga\n"); }
        else printf("Pogresan unos.\n");
    } while(unos != 0);
    newline();
    newline();
    newline();
    prijava();
}